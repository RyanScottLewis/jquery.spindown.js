Array.prototype.includes=function(value){for(var i=0;i<this.length;i++){if(this[i]===value){return true}}return false};Array.prototype.remove=function(value){var i=this.indexOf(value);if(i!=-1)this.splice(i,1)};(function($){$.fn.extend({spindown:function(options){var defaults={cookie:true,cookieName:'spindown',cookiePath:'/',cookieExpire:14,slideSpeed:100,openedClass:'opened',closedClass:'closed'};var options=$.extend(defaults,options);var opened;return this.each(function(){var self=$(this);var next=self.next();var text=self.text();var cookie=$.cookie(options.cookieName);if(options.cookie){cookie?opened=$.evalJSON($.base64Decode(cookie)):opened=[];opened.includes(text)?next.show():next.hide()}else{opened=[];next.hide()}next.is(":visible")?self.addClass(options.openedClass):self.addClass(options.closedClass);self.click(function(){if(opened.includes(text)){self.addClass(options.closedClass);self.removeClass(options.openedClass)}else{self.removeClass(options.closedClass);self.addClass(options.openedClass)}self.next().slideToggle(options.slideSpeed,function(){if(opened.includes(text)){if(next.is(":hidden")){opened.remove(text)}}else{if(next.is(":visible")){opened.push(text)}}if(options.cookie){$.cookie(options.cookieName,$.base64Encode($.toJSON(opened)),{path:options.cookiePath,expires:options.cookieExpire})}return false});return false})})}})})(jQuery);